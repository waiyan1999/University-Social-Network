<%# locals: n %>
<% css = ["list-group-item", "list-group-item-action"] %>
<% css << "active" if n.read_at.nil? %>

<div class="<%= css.join(" ") %> d-flex justify-content-between align-items-start">
  <div class="me-auto">
    <div class="fw-semibold">
      <%= n.actor&.email || "Someone" %>
      <%# Action text, e.g., "liked", "commented", "followed" %>
      <%= n.action %>
      <%# Simple notifiable label %>
      <% if n.notifiable.present? %>
        on <%= n.notifiable.class.name %> #<%= n.notifiable.id %>
      <% end %>
    </div>
    <small class="text-muted"><%= time_ago_in_words(n.created_at) %> ago</small>
  </div>

  <% if n.read_at.nil? %>
    <%= button_to "Mark read",
                  notification_path(n),
                  method: :patch,
                  form: { data: { turbo: true } },
                  class: "btn btn-sm btn-outline-primary" %>
  <% else %>
    <span class="badge text-bg-secondary">Read</span>
  <% end %>
</div>
